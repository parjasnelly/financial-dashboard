<%-contentFor('body')%>
<main class="container">
    <h1>Receitas</h1>
    <a class="btn btn-primary" href="/dashboard/revenues/new" role="button">Criar Nova Receita</a>
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Nome</th>
            <th scope="col">Valor</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <%revenues.forEach((item)=>{%>
            <tr>
                <th scope="row"><%= item.id%></th>
                <td><%= item.name%></td>
                <td><%= item.value%></td>
                <td>
                    <a href="/dashboard/revenues/edit/<%= item.id%>" class="btn btn-primary">Editar</a>
                    <button type="button" onclick="removeItem(<%= item.id%>,'revenues')" class="btn btn-danger">Remover</button>
                </td>
            </tr>
        <%})%>
        </tbody>
    </table>

    <h1>Despesas</h1>
    <a class="btn btn-primary" href="/dashboard/expenses/new" role="button">Criar Nova Despesa</a>
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Nome</th>
            <th scope="col">Valor</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <%expenses.forEach((item)=>{%>
            <tr>
                <th scope="row"><%= item.id%></th>
                <td><%= item.name%></td>
                <td><%= item.value%></td>
                <td>
                    <a href="/dashboard/expenses/edit/<%= item.id%>" class="btn btn-primary">Editar</a>
                    <button type="button" onclick="removeItem(<%= item.id%>,'expenses')" class="btn btn-danger">Remover</button>
                </td>
            </tr>
        <%})%>
        </tbody>
    </table>
</main>
<script>
    function  removeItem(id, type){
        if(confirm("VocÃª realmente deseja remover o item selecionado?")){
            fetch(`/dashboard/${type}/remove/${id}`, {method: "POST"}).then(function (response) {
                document.location.reload()
            })
        }
    }
</script>